<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>AI vs íˆ¬ìì ëŒ€ê²° - ëª¨ì˜ íˆ¬ì ê²Œì„</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 100%);
            min-height: 100vh;
            color: #fff;
        }

        /* Login Screen */
        .login-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 100%);
        }

        .login-box {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 40px;
            width: 350px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }

        .login-box h1 {
            margin-bottom: 10px;
            font-size: 1.8rem;
            background: linear-gradient(135deg, #f472b6, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .login-box p {
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 30px;
            font-size: 0.9rem;
        }

        .login-input {
            width: 100%;
            padding: 14px 16px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            font-size: 1rem;
        }

        .login-input:focus {
            outline: none;
            border-color: #a855f7;
        }

        .login-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #f472b6, #a855f7);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(168, 85, 247, 0.3);
        }

        .login-error {
            color: #f87171;
            margin-top: 15px;
            font-size: 0.9rem;
            display: none;
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-size: 1.5rem;
        }

        .loading::after {
            content: '';
            width: 40px;
            height: 40px;
            border: 4px solid #ffffff33;
            border-top-color: #a855f7;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        header {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header-content {
            max-width: 1800px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(135deg, #f472b6, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .nav-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            padding: 10px 16px;
            border-radius: 10px;
            transition: all 0.2s;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 6px;
            border: 1px solid transparent;
        }

        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            transform: translateY(-1px);
        }

        .nav-links a.active {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.4), rgba(244, 114, 182, 0.3));
            border-color: rgba(168, 85, 247, 0.6);
            color: #fff;
            font-weight: 600;
        }

        .logout-btn {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.5);
            color: #f87171;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.3);
        }

        main {
            max-width: 1800px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* Battle Arena Header */
        .battle-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .battle-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .battle-header p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.1rem;
        }

        /* Score Board */
        .scoreboard {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 30px;
            margin-bottom: 40px;
            align-items: center;
        }

        .player-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .player-card.user {
            border-color: rgba(74, 222, 128, 0.5);
        }

        .player-card.ai {
            border-color: rgba(168, 85, 247, 0.5);
        }

        .player-card h2 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .player-card.user h2 {
            color: #4ade80;
        }

        .player-card.ai h2 {
            color: #a855f7;
        }

        .player-icon {
            font-size: 2rem;
        }

        .player-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.85rem;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.3rem;
            font-weight: bold;
        }

        .stat-value.positive {
            color: #4ade80;
        }

        .stat-value.negative {
            color: #ef4444;
        }

        /* Hero stat for return rate */
        .stat-item.hero {
            grid-column: 1 / -1;
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
        }

        .stat-item.hero .stat-value {
            font-size: 2.5rem;
        }

        .stat-item.hero .stat-label {
            font-size: 1rem;
        }

        /* Winner glow effect */
        .player-card.winning {
            box-shadow: 0 0 30px rgba(74, 222, 128, 0.4);
            animation: winnerPulse 2s ease-in-out infinite;
        }

        .player-card.ai.winning {
            box-shadow: 0 0 30px rgba(168, 85, 247, 0.4);
        }

        @keyframes winnerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        /* Difference banner */
        .diff-banner {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(251, 146, 60, 0.1));
            border: 2px solid rgba(245, 158, 11, 0.5);
            border-radius: 12px;
            padding: 15px 25px;
            text-align: center;
            margin-bottom: 20px;
        }

        .diff-banner .diff-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #f59e0b;
        }

        .diff-banner .diff-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        .vs-badge {
            font-size: 3rem;
            font-weight: bold;
            color: #f59e0b;
            text-shadow: 0 0 20px rgba(245, 158, 11, 0.5);
        }

        /* Winner Banner */
        .winner-banner {
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.2), rgba(34, 197, 94, 0.1));
            border: 2px solid #4ade80;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 30px;
        }

        .winner-banner.ai-winning {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(139, 92, 246, 0.1));
            border-color: #a855f7;
        }

        .winner-banner h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .winner-banner p {
            color: rgba(255, 255, 255, 0.8);
        }

        /* Charts Section */
        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }

        .chart-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chart-card.full-width {
            grid-column: 1 / -1;
        }

        .chart-card h3 {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chart-container {
            height: 300px;
            position: relative;
        }

        /* Portfolio Tables */
        .portfolios-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }

        .portfolio-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .portfolio-card.user {
            border-left: 4px solid #4ade80;
        }

        .portfolio-card.ai {
            border-left: 4px solid #a855f7;
        }

        .portfolio-card h3 {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .holdings-table {
            width: 100%;
            border-collapse: collapse;
        }

        .holdings-table th,
        .holdings-table td {
            padding: 12px 10px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .holdings-table th {
            color: rgba(255, 255, 255, 0.6);
            font-weight: 500;
            font-size: 0.85rem;
        }

        .holdings-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        /* AI Decision Log */
        .decision-log {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 40px;
        }

        .decision-log h3 {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .decision-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .decision-item {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 3px solid #a855f7;
        }

        .decision-item.buy {
            border-left-color: #4ade80;
        }

        .decision-item.sell {
            border-left-color: #ef4444;
        }

        .decision-item.hold {
            border-left-color: #f59e0b;
        }

        .decision-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .decision-date {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.85rem;
        }

        .decision-action {
            font-weight: bold;
            padding: 3px 10px;
            border-radius: 5px;
            font-size: 0.85rem;
        }

        .decision-action.buy {
            background: rgba(74, 222, 128, 0.2);
            color: #4ade80;
        }

        .decision-action.sell {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .decision-action.hold {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .decision-reasoning {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .decision-details {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            font-size: 0.85rem;
        }

        .decision-detail-item {
            display: flex;
            justify-content: space-between;
        }

        .decision-detail-item span:first-child {
            color: rgba(255, 255, 255, 0.5);
        }

        /* Market Analysis */
        .market-analysis {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 40px;
        }

        .market-analysis h3 {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .market-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .market-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
        }

        .market-item-label {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.85rem;
            margin-bottom: 5px;
        }

        .market-item-value {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .market-insight {
            background: rgba(168, 85, 247, 0.1);
            border-left: 3px solid #a855f7;
            padding: 15px;
            border-radius: 0 10px 10px 0;
            margin-top: 15px;
        }

        .market-insight h4 {
            margin-bottom: 10px;
            color: #a855f7;
        }

        /* AI Performance Metrics */
        .ai-metrics {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 40px;
        }

        .ai-metrics h3 {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
        }

        .metric-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .metric-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.85rem;
        }

        .metric-trend {
            font-size: 0.9rem;
            margin-top: 5px;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .scoreboard {
                grid-template-columns: 1fr;
            }

            .vs-badge {
                text-align: center;
            }

            .charts-grid,
            .portfolios-section {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .player-stats {
                grid-template-columns: 1fr;
            }
        }

        /* Theme Toggle Button */
        .theme-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.2s;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        :root[data-theme="light"] .theme-toggle {
            background: rgba(0, 0, 0, 0.1);
            border-color: rgba(0, 0, 0, 0.2);
            color: #1a1a2e;
        }

        /* Light Theme Styles */
        :root[data-theme="light"] {
            --bg-primary: #f5f5f5;
            --bg-secondary: #ffffff;
            --text-primary: #1a1a2e;
            --text-secondary: rgba(0, 0, 0, 0.6);
        }

        :root[data-theme="light"] body {
            background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
            color: #1a1a2e;
        }

        :root[data-theme="light"] .login-screen {
            background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
        }

        :root[data-theme="light"] .login-box,
        :root[data-theme="light"] header,
        :root[data-theme="light"] .player-card,
        :root[data-theme="light"] .chart-card,
        :root[data-theme="light"] .portfolio-card,
        :root[data-theme="light"] .decision-log,
        :root[data-theme="light"] .market-analysis,
        :root[data-theme="light"] .ai-metrics {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(0, 0, 0, 0.1);
        }

        :root[data-theme="light"] .login-input {
            background: rgba(0, 0, 0, 0.05);
            border-color: rgba(0, 0, 0, 0.2);
            color: #1a1a2e;
        }

        :root[data-theme="light"] .nav-links a {
            color: rgba(0, 0, 0, 0.7);
        }

        :root[data-theme="light"] .nav-links a:hover {
            background: rgba(0, 0, 0, 0.1);
            color: #1a1a2e;
        }

        :root[data-theme="light"] .stat-item,
        :root[data-theme="light"] .market-item,
        :root[data-theme="light"] .metric-item,
        :root[data-theme="light"] .decision-item {
            background: rgba(0, 0, 0, 0.05);
        }

        :root[data-theme="light"] .stat-label,
        :root[data-theme="light"] .market-item-label,
        :root[data-theme="light"] .metric-label,
        :root[data-theme="light"] .decision-date {
            color: rgba(0, 0, 0, 0.6);
        }

        :root[data-theme="light"] .holdings-table th {
            color: rgba(0, 0, 0, 0.6);
        }

        :root[data-theme="light"] .holdings-table td,
        :root[data-theme="light"] .holdings-table tr {
            border-color: rgba(0, 0, 0, 0.1);
            color: #1a1a2e;
        }

        :root[data-theme="light"] .decision-reasoning {
            color: rgba(0, 0, 0, 0.8);
        }

        :root[data-theme="light"] .market-insight {
            background: rgba(168, 85, 247, 0.1);
        }

        .header-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-box">
            <h1>AI íˆ¬ì ëŒ€ê²°</h1>
            <p>AIì™€ í•¨ê»˜í•˜ëŠ” ëª¨ì˜ íˆ¬ì ê²Œì„</p>
            <input type="text" id="loginId" class="login-input" placeholder="ì•„ì´ë””" autocomplete="username">
            <input type="password" id="loginPw" class="login-input" placeholder="ë¹„ë°€ë²ˆí˜¸" autocomplete="current-password">
            <button class="login-btn" onclick="attemptLogin()">ë¡œê·¸ì¸</button>
            <p id="loginError" class="login-error">ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading" style="display: none;">
        ë°ì´í„° ë¡œë”© ì¤‘...
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" style="display: none;">
        <header>
            <div class="header-content">
                <div class="logo">AI íˆ¬ì ëŒ€ê²°</div>
                <nav class="nav-links">
                    <a href="index.html">ğŸ“Š í¬íŠ¸í´ë¦¬ì˜¤</a>
                    <a href="battle.html" class="active">ğŸ¤– AI ëŒ€ê²°</a>
                    <a href="screener.html">ğŸ” ìŠ¤í¬ë¦¬ë„ˆ</a>
                    <a href="ideas.html">ğŸ’¡ ì•„ì´ë””ì–´</a>
                    <a href="history.html">ğŸ“œ ê±°ë˜ë‚´ì—­</a>
                    <a href="manage.html">âš™ï¸ ê´€ë¦¬</a>
                    <a href="guide.html">ğŸ“– ê°€ì´ë“œ</a>
                    <a href="quiz.html">ğŸ§  í€´ì¦ˆ</a>
                    <a href="glossary.html">ğŸ“š ìš©ì–´ì§‘</a>
                </nav>
                <div class="header-buttons">
                    <button class="theme-toggle" onclick="toggleTheme()" title="í…Œë§ˆ ì „í™˜">
                        <span id="themeIcon">â˜€ï¸</span>
                    </button>
                    <button class="logout-btn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
                </div>
            </div>
        </header>

        <main>
            <div class="battle-header">
                <h1>íˆ¬ìì vs AI í¬íŠ¸í´ë¦¬ì˜¤ ëŒ€ê²°</h1>
                <p>AIì™€ ìˆ˜ìµë¥  ëŒ€ê²°ì„ í¼ì³ë³´ì„¸ìš”</p>
            </div>

            <!-- Winner Banner -->
            <div id="winnerBanner" class="winner-banner" style="display: none;">
                <h3 id="winnerText"></h3>
                <p id="winnerDetail"></p>
            </div>

            <!-- Scoreboard -->
            <div class="scoreboard">
                <div class="player-card user">
                    <h2><span class="player-icon">ğŸ‘¤</span> ë‚˜ì˜ í¬íŠ¸í´ë¦¬ì˜¤</h2>
                    <div class="player-stats">
                        <div class="stat-item">
                            <div class="stat-label">ì´ ìì‚°</div>
                            <div id="userTotalValue" class="stat-value">$0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">ì´ ìˆ˜ìµë¥ </div>
                            <div id="userReturnPct" class="stat-value">0%</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">ì†ìµ</div>
                            <div id="userGainLoss" class="stat-value">$0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">ë³´ìœ  ì¢…ëª©</div>
                            <div id="userHoldingsCount" class="stat-value">0</div>
                        </div>
                    </div>
                </div>

                <div class="vs-badge">VS</div>

                <div class="player-card ai">
                    <h2><span class="player-icon">ğŸ¤–</span> AI í¬íŠ¸í´ë¦¬ì˜¤</h2>
                    <div class="player-stats">
                        <div class="stat-item">
                            <div class="stat-label">ì´ ìì‚°</div>
                            <div id="aiTotalValue" class="stat-value">$0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">ì´ ìˆ˜ìµë¥ </div>
                            <div id="aiReturnPct" class="stat-value">0%</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">ì†ìµ</div>
                            <div id="aiGainLoss" class="stat-value">$0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">ë³´ìœ  ì¢…ëª©</div>
                            <div id="aiHoldingsCount" class="stat-value">0</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance Chart -->
            <div class="charts-grid">
                <div class="chart-card full-width">
                    <h3>ğŸ“ˆ ìˆ˜ìµë¥  ë¹„êµ ì°¨íŠ¸</h3>
                    <div class="chart-container">
                        <canvas id="comparisonChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Market Analysis -->
            <div class="market-analysis">
                <h3>ğŸ“Š ì˜¤ëŠ˜ì˜ ì‹œì¥ ë¶„ì„</h3>
                <div class="market-summary">
                    <div class="market-item">
                        <div class="market-item-label">ì‹œì¥ ì‹¬ë¦¬</div>
                        <div id="marketSentiment" class="market-item-value">-</div>
                    </div>
                    <div class="market-item">
                        <div class="market-item-label">ë³€ë™ì„± ì§€ìˆ˜</div>
                        <div id="volatilityIndex" class="market-item-value">-</div>
                    </div>
                    <div class="market-item">
                        <div class="market-item-label">ì¶”ì„¸</div>
                        <div id="marketTrend" class="market-item-value">-</div>
                    </div>
                    <div class="market-item">
                        <div class="market-item-label">AI ê¶Œì¥ ì „ëµ</div>
                        <div id="aiStrategy" class="market-item-value">-</div>
                    </div>
                </div>
                <div class="market-insight">
                    <h4>ğŸ¤– AI ì‹œì¥ ë¶„ì„</h4>
                    <p id="marketInsightText">ì‹œì¥ ë°ì´í„°ë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
            </div>

            <!-- Portfolio Tables -->
            <div class="portfolios-section">
                <div class="portfolio-card user">
                    <h3>ğŸ‘¤ ë‚˜ì˜ ë³´ìœ  ì¢…ëª©</h3>
                    <table class="holdings-table">
                        <thead>
                            <tr>
                                <th>ì¢…ëª©</th>
                                <th>ìˆ˜ëŸ‰</th>
                                <th>í‰ë‹¨ê°€</th>
                                <th>í˜„ì¬ê°€</th>
                                <th>ì†ìµ</th>
                            </tr>
                        </thead>
                        <tbody id="userHoldingsTable">
                        </tbody>
                    </table>
                </div>

                <div class="portfolio-card ai">
                    <h3>ğŸ¤– AI ë³´ìœ  ì¢…ëª©</h3>
                    <table class="holdings-table">
                        <thead>
                            <tr>
                                <th>ì¢…ëª©</th>
                                <th>ìˆ˜ëŸ‰</th>
                                <th>í‰ë‹¨ê°€</th>
                                <th>í˜„ì¬ê°€</th>
                                <th>ì†ìµ</th>
                            </tr>
                        </thead>
                        <tbody id="aiHoldingsTable">
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- AI Performance Metrics -->
            <div class="ai-metrics">
                <h3>ğŸ¯ AI ì„±ê³¼ ì§€í‘œ</h3>
                <div class="metrics-grid">
                    <div class="metric-item">
                        <div id="winRate" class="metric-value">-</div>
                        <div class="metric-label">ì˜ˆì¸¡ ì ì¤‘ë¥ </div>
                    </div>
                    <div class="metric-item">
                        <div id="avgReturn" class="metric-value">-</div>
                        <div class="metric-label">í‰ê·  ìˆ˜ìµë¥ </div>
                    </div>
                    <div class="metric-item">
                        <div id="sharpeRatio" class="metric-value">-</div>
                        <div class="metric-label">ìƒ¤í”„ ë¹„ìœ¨</div>
                    </div>
                    <div class="metric-item">
                        <div id="maxDrawdown" class="metric-value">-</div>
                        <div class="metric-label">ìµœëŒ€ ë‚™í­</div>
                    </div>
                    <div class="metric-item">
                        <div id="tradeCount" class="metric-value">-</div>
                        <div class="metric-label">ì´ ê±°ë˜ íšŸìˆ˜</div>
                    </div>
                    <div class="metric-item">
                        <div id="daysActive" class="metric-value">-</div>
                        <div class="metric-label">ìš´ìš© ê¸°ê°„</div>
                    </div>
                </div>
            </div>

            <!-- AI Decision Log -->
            <div class="decision-log">
                <h3>ğŸ“ AI íˆ¬ì ê²°ì • ë¡œê·¸</h3>
                <div id="decisionList" class="decision-list">
                    <!-- Decision items will be inserted here -->
                </div>
            </div>
        </main>
    </div>

    <script>
        // Authentication
        const AUTH_KEY = 'spg_auth_token';

        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return hash.toString(16);
        }

        // ë³´ì•ˆ: SHA-256 í•´ì‹œ (í‰ë¬¸ ë¹„ë°€ë²ˆí˜¸ ë…¸ì¶œ ë°©ì§€)
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        async function attemptLogin() {
            const id = document.getElementById('loginId').value;
            const pw = document.getElementById('loginPw').value;

            // ë³´ì•ˆ ì¸ì¦: í•´ì‹œ ë¹„êµ
            const inputHash = await sha256(id + ':' + pw);
            const expectedHash = '512f7a6fdeab460f602438a72f603fd88aa4b11c51dc0a6bb90a3c4ac197487e';

            if (inputHash === expectedHash) {
                const token = await sha256(id + pw + Date.now() + Math.random());
                sessionStorage.setItem(AUTH_KEY, token);
                showDashboard();
            } else {
                document.getElementById('loginError').style.display = 'block';
            }
        }

        function logout() {
            sessionStorage.removeItem(AUTH_KEY);
            location.reload();
        }

        function checkAuth() {
            return sessionStorage.getItem(AUTH_KEY) !== null;
        }

        function showDashboard() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('loadingScreen').style.display = 'flex';
            loadData();
        }

        // Enter key to login
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('loginPw').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') attemptLogin();
            });

            if (checkAuth()) {
                showDashboard();
            }
        });

        // Global data
        let userData = null;
        let aiData = null;
        let comparisonChart = null;

        async function loadData() {
            try {
                // Load user data
                const userResponse = await fetch('data.json');
                userData = await userResponse.json();

                // Load AI data
                const aiResponse = await fetch('ai_data.json');
                aiData = await aiResponse.json();

                renderDashboard();
            } catch (error) {
                console.error('Error loading data:', error);
                // If AI data doesn't exist, create initial AI portfolio
                if (!aiData) {
                    aiData = createInitialAIPortfolio(userData);
                }
                renderDashboard();
            }
        }

        function createInitialAIPortfolio(userData) {
            // AI starts with same capital as user
            const totalCost = userData.summary.total_cost;

            return {
                "last_updated": new Date().toISOString(),
                "initial_capital": totalCost,
                "summary": {
                    "total_value": totalCost,
                    "total_cost": totalCost,
                    "total_gain_loss": 0,
                    "total_gain_loss_pct": 0,
                    "cash": totalCost * 0.2, // Keep 20% cash
                    "holdings_count": 0
                },
                "holdings": [],
                "history": [
                    {
                        "date": new Date().toISOString().split('T')[0],
                        "total_value": totalCost,
                        "return_pct": 0
                    }
                ],
                "decisions": [
                    {
                        "date": new Date().toISOString(),
                        "action": "hold",
                        "symbol": "CASH",
                        "reasoning": "AI í¬íŠ¸í´ë¦¬ì˜¤ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œì¥ì„ ë¶„ì„í•˜ê³  ìµœì ì˜ íˆ¬ì ì‹œì ì„ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.",
                        "details": {
                            "initial_capital": totalCost,
                            "strategy": "ê°€ì¹˜íˆ¬ì + ì„±ì¥íˆ¬ì + ë¦¬ìŠ¤í¬ê´€ë¦¬ ë³µí•© ì „ëµ"
                        }
                    }
                ],
                "metrics": {
                    "win_rate": 0,
                    "avg_return": 0,
                    "sharpe_ratio": 0,
                    "max_drawdown": 0,
                    "trade_count": 0,
                    "days_active": 1
                }
            };
        }

        function renderDashboard() {
            document.getElementById('loadingScreen').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';

            renderScoreboard();
            renderComparisonChart();
            renderMarketAnalysis();
            renderPortfolioTables();
            renderAIMetrics();
            renderDecisionLog();
            renderWinnerBanner();
        }

        function renderScoreboard() {
            // User stats
            const userSummary = userData.summary;
            document.getElementById('userTotalValue').textContent = formatCurrency(userSummary.total_value);
            document.getElementById('userReturnPct').textContent = formatPercent(userSummary.total_gain_loss_pct);
            document.getElementById('userReturnPct').className = 'stat-value ' + (userSummary.total_gain_loss_pct >= 0 ? 'positive' : 'negative');
            document.getElementById('userGainLoss').textContent = formatCurrency(userSummary.total_gain_loss);
            document.getElementById('userGainLoss').className = 'stat-value ' + (userSummary.total_gain_loss >= 0 ? 'positive' : 'negative');
            document.getElementById('userHoldingsCount').textContent = userSummary.holdings_count;

            // AI stats
            const aiSummary = aiData.summary;
            document.getElementById('aiTotalValue').textContent = formatCurrency(aiSummary.total_value);
            document.getElementById('aiReturnPct').textContent = formatPercent(aiSummary.total_gain_loss_pct);
            document.getElementById('aiReturnPct').className = 'stat-value ' + (aiSummary.total_gain_loss_pct >= 0 ? 'positive' : 'negative');
            document.getElementById('aiGainLoss').textContent = formatCurrency(aiSummary.total_gain_loss);
            document.getElementById('aiGainLoss').className = 'stat-value ' + (aiSummary.total_gain_loss >= 0 ? 'positive' : 'negative');
            document.getElementById('aiHoldingsCount').textContent = aiSummary.holdings_count;
        }

        function renderWinnerBanner() {
            const userReturn = userData.summary.total_gain_loss_pct;
            const aiReturn = aiData.summary.total_gain_loss_pct;
            const diff = aiReturn - userReturn;

            const banner = document.getElementById('winnerBanner');
            const winnerText = document.getElementById('winnerText');
            const winnerDetail = document.getElementById('winnerDetail');

            if (Math.abs(diff) < 0.5) {
                banner.style.display = 'none';
                return;
            }

            banner.style.display = 'block';

            if (diff > 0) {
                banner.className = 'winner-banner ai-winning';
                winnerText.textContent = 'ğŸ¤– AIê°€ ì•ì„œê³  ìˆìŠµë‹ˆë‹¤!';
                winnerDetail.textContent = `AIê°€ ${diff.toFixed(2)}%p ë” ë†’ì€ ìˆ˜ìµë¥ ì„ ê¸°ë¡ ì¤‘ì…ë‹ˆë‹¤.`;
            } else {
                banner.className = 'winner-banner';
                winnerText.textContent = 'ğŸ‘¤ ë‹¹ì‹ ì´ ì•ì„œê³  ìˆìŠµë‹ˆë‹¤!';
                winnerDetail.textContent = `ë‹¹ì‹ ì´ ${Math.abs(diff).toFixed(2)}%p ë” ë†’ì€ ìˆ˜ìµë¥ ì„ ê¸°ë¡ ì¤‘ì…ë‹ˆë‹¤.`;
            }
        }

        function renderComparisonChart() {
            const ctx = document.getElementById('comparisonChart').getContext('2d');

            // Combine user and AI history
            const userHistory = userData.portfolio_history || [];
            const aiHistory = aiData.history || [];

            const labels = userHistory.map(h => h.date);
            const userReturns = userHistory.map(h => h.total_gain_loss_pct);
            const aiReturns = aiHistory.map(h => h.return_pct || 0);

            // Pad AI returns if shorter
            while (aiReturns.length < userReturns.length) {
                aiReturns.push(aiReturns[aiReturns.length - 1] || 0);
            }

            if (comparisonChart) {
                comparisonChart.destroy();
            }

            comparisonChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'ë‚˜ì˜ ìˆ˜ìµë¥ ',
                            data: userReturns,
                            borderColor: '#4ade80',
                            backgroundColor: 'rgba(74, 222, 128, 0.1)',
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'AI ìˆ˜ìµë¥ ',
                            data: aiReturns,
                            borderColor: '#a855f7',
                            backgroundColor: 'rgba(168, 85, 247, 0.1)',
                            fill: true,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#fff' }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: 'rgba(255,255,255,0.6)' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        y: {
                            ticks: {
                                color: 'rgba(255,255,255,0.6)',
                                callback: v => v + '%'
                            },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        }
                    }
                }
            });
        }

        function renderMarketAnalysis() {
            // Calculate market sentiment based on user's portfolio performance
            const avgChange = userData.holdings.reduce((sum, h) => sum + (h.change_pct || 0), 0) / userData.holdings.length;

            let sentiment, sentimentColor;
            if (avgChange > 2) {
                sentiment = 'ë§¤ìš° ê¸ì •ì ';
                sentimentColor = '#4ade80';
            } else if (avgChange > 0) {
                sentiment = 'ê¸ì •ì ';
                sentimentColor = '#22c55e';
            } else if (avgChange > -2) {
                sentiment = 'ì¤‘ë¦½';
                sentimentColor = '#f59e0b';
            } else {
                sentiment = 'ë¶€ì •ì ';
                sentimentColor = '#ef4444';
            }

            document.getElementById('marketSentiment').textContent = sentiment;
            document.getElementById('marketSentiment').style.color = sentimentColor;

            // Volatility based on price changes
            const volatility = Math.abs(avgChange) * 10;
            let volatilityText;
            if (volatility < 10) volatilityText = 'ë‚®ìŒ';
            else if (volatility < 25) volatilityText = 'ë³´í†µ';
            else volatilityText = 'ë†’ìŒ';
            document.getElementById('volatilityIndex').textContent = volatilityText;

            // Trend
            const history = userData.portfolio_history || [];
            let trend = 'íš¡ë³´';
            if (history.length >= 2) {
                const recentChange = history[history.length - 1].total_value - history[history.length - 2].total_value;
                if (recentChange > 0) trend = 'ìƒìŠ¹ ì¶”ì„¸';
                else if (recentChange < 0) trend = 'í•˜ë½ ì¶”ì„¸';
            }
            document.getElementById('marketTrend').textContent = trend;

            // AI Strategy recommendation
            let strategy = 'ê´€ë§';
            if (avgChange < -3) {
                strategy = 'ë°©ì–´ì ';
            } else if (avgChange > 3) {
                strategy = 'ì ê·¹ì ';
            }
            document.getElementById('aiStrategy').textContent = strategy;

            // Market insight
            generateMarketInsight(avgChange, volatility, trend);
        }

        function generateMarketInsight(avgChange, volatility, trend) {
            let insight = '';

            if (avgChange < -2) {
                insight = `ì˜¤ëŠ˜ ì‹œì¥ì€ ì „ë°˜ì ìœ¼ë¡œ í•˜ë½ì„¸ë¥¼ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤. `;
                insight += `ë²¤ì €ë¯¼ ê·¸ë ˆì´ì—„ì˜ 'ì•ˆì „ë§ˆì§„' ì›ì¹™ì— ë”°ë¼, ì´ëŸ° ì‹œê¸°ëŠ” ì˜¤íˆë ¤ ì €í‰ê°€ëœ ìš°ëŸ‰ì£¼ë¥¼ ë°œêµ´í•  ìˆ˜ ìˆëŠ” ê¸°íšŒì…ë‹ˆë‹¤. `;
                insight += `í•˜ì›Œë“œ ë§‰ìŠ¤ì˜ ê´€ì ì—ì„œ í˜„ì¬ ë¦¬ìŠ¤í¬ ëŒ€ë¹„ ë³´ìƒ ë¹„ìœ¨ì„ ì¬í‰ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.`;
            } else if (avgChange > 2) {
                insight = `ì˜¤ëŠ˜ ì‹œì¥ì€ ê°•í•œ ìƒìŠ¹ì„¸ë¥¼ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤. `;
                insight += `í”¼í„° ë¦°ì¹˜ì˜ ê´€ì ì—ì„œ í˜„ì¬ ë³´ìœ  ì¢…ëª©ë“¤ì˜ ì„±ì¥ ìŠ¤í† ë¦¬ê°€ ì—¬ì „íˆ ìœ íš¨í•œì§€ ì ê²€ì´ í•„ìš”í•©ë‹ˆë‹¤. `;
                insight += `ì°°ë¦¬ ë©ê±°ì˜ ì—­ë°œìƒ íˆ¬ì ì›ì¹™ì— ë”°ë¼ ê³¼ì—´ ì‹ í˜¸ê°€ ìˆëŠ”ì§€ ëª¨ë‹ˆí„°ë§í•˜ê³  ìˆìŠµë‹ˆë‹¤.`;
            } else {
                insight = `ì‹œì¥ì´ í˜¼ì¡°ì„¸ë¥¼ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤. `;
                insight += `ë ˆì´ ë‹¬ë¦¬ì˜¤ì˜ ì˜¬ì›¨ë” í¬íŠ¸í´ë¦¬ì˜¤ ì›ì¹™ì— ë”°ë¼ ë¶„ì‚° íˆ¬ì ì „ëµì„ ìœ ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤. `;
                insight += `í˜„ì¬ëŠ” ê´€ë§í•˜ë©° ë” í™•ì‹¤í•œ ì‹œê·¸ë„ì„ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.`;
            }

            document.getElementById('marketInsightText').textContent = insight;
        }

        function renderPortfolioTables() {
            // User holdings
            const userTable = document.getElementById('userHoldingsTable');
            userTable.innerHTML = userData.holdings.map(h => `
                <tr>
                    <td>
                        <strong>${h.symbol}</strong>
                        <div style="font-size:0.8rem;color:rgba(255,255,255,0.5)">${h.name}</div>
                    </td>
                    <td>${h.shares}</td>
                    <td>${formatCurrency(h.avg_price)}</td>
                    <td>${formatCurrency(h.current_price)}</td>
                    <td class="${h.gain_loss >= 0 ? 'positive' : 'negative'}">
                        ${formatPercent(h.gain_loss_pct)}
                    </td>
                </tr>
            `).join('');

            // AI holdings
            const aiTable = document.getElementById('aiHoldingsTable');
            if (aiData.holdings && aiData.holdings.length > 0) {
                aiTable.innerHTML = aiData.holdings.map(h => `
                    <tr>
                        <td>
                            <strong>${h.symbol}</strong>
                            <div style="font-size:0.8rem;color:rgba(255,255,255,0.5)">${h.name || ''}</div>
                        </td>
                        <td>${h.shares}</td>
                        <td>${formatCurrency(h.avg_price)}</td>
                        <td>${formatCurrency(h.current_price || h.avg_price)}</td>
                        <td class="${(h.gain_loss_pct || 0) >= 0 ? 'positive' : 'negative'}">
                            ${formatPercent(h.gain_loss_pct || 0)}
                        </td>
                    </tr>
                `).join('');
            } else {
                aiTable.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align:center;color:rgba(255,255,255,0.5);padding:30px">
                            í˜„ê¸ˆ ${formatCurrency(aiData.summary.cash || aiData.summary.total_value)} ë³´ìœ  ì¤‘<br>
                            <small>AIê°€ ìµœì ì˜ íˆ¬ì ì‹œì ì„ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤</small>
                        </td>
                    </tr>
                `;
            }
        }

        function renderAIMetrics() {
            const metrics = aiData.metrics || {};

            document.getElementById('winRate').textContent = metrics.win_rate ? `${metrics.win_rate}%` : '-';
            document.getElementById('avgReturn').textContent = metrics.avg_return ? `${metrics.avg_return}%` : '-';
            document.getElementById('sharpeRatio').textContent = metrics.sharpe_ratio || '-';
            document.getElementById('maxDrawdown').textContent = metrics.max_drawdown ? `${metrics.max_drawdown}%` : '-';
            document.getElementById('tradeCount').textContent = metrics.trade_count || 0;
            document.getElementById('daysActive').textContent = metrics.days_active ? `${metrics.days_active}ì¼` : '-';
        }

        function renderDecisionLog() {
            const decisionList = document.getElementById('decisionList');
            const decisions = aiData.decisions || [];

            if (decisions.length === 0) {
                decisionList.innerHTML = `
                    <div class="decision-item hold">
                        <div class="decision-header">
                            <span class="decision-date">${new Date().toLocaleString('ko-KR')}</span>
                            <span class="decision-action hold">ê´€ë§</span>
                        </div>
                        <div class="decision-reasoning">
                            AI í¬íŠ¸í´ë¦¬ì˜¤ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹œì¥ ë¶„ì„ì„ ì‹œì‘í•©ë‹ˆë‹¤.
                        </div>
                    </div>
                `;
                return;
            }

            decisionList.innerHTML = decisions.slice().reverse().map(d => {
                const actionClass = d.action.toLowerCase();
                const actionText = {
                    'buy': 'ë§¤ìˆ˜',
                    'sell': 'ë§¤ë„',
                    'hold': 'ê´€ë§'
                }[actionClass] || d.action;

                return `
                    <div class="decision-item ${actionClass}">
                        <div class="decision-header">
                            <span class="decision-date">${new Date(d.date).toLocaleString('ko-KR')}</span>
                            <span class="decision-action ${actionClass}">${actionText}</span>
                        </div>
                        <div class="decision-reasoning">${d.reasoning}</div>
                        ${d.details ? `
                            <div class="decision-details">
                                ${Object.entries(d.details).map(([key, value]) => `
                                    <div class="decision-detail-item">
                                        <span>${formatDetailKey(key)}</span>
                                        <span>${formatDetailValue(key, value)}</span>
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        function formatDetailKey(key) {
            const keyMap = {
                'symbol': 'ì¢…ëª©',
                'shares': 'ìˆ˜ëŸ‰',
                'price': 'ê°€ê²©',
                'amount': 'ê¸ˆì•¡',
                'reason': 'ì‚¬ìœ ',
                'graham_score': 'ê·¸ë ˆì´ì—„ ì ìˆ˜',
                'lynch_category': 'ë¦°ì¹˜ ë¶„ë¥˜',
                'marks_risk': 'ë§‰ìŠ¤ ë¦¬ìŠ¤í¬',
                'munger_score': 'ë©ê±° ì ìˆ˜',
                'initial_capital': 'ì´ˆê¸° ìë³¸',
                'strategy': 'ì „ëµ'
            };
            return keyMap[key] || key;
        }

        function formatDetailValue(key, value) {
            if (key === 'price' || key === 'amount' || key === 'initial_capital') {
                return formatCurrency(value);
            }
            return value;
        }

        function formatCurrency(value) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(value);
        }

        function formatPercent(value) {
            return (value >= 0 ? '+' : '') + value.toFixed(2) + '%';
        }

        // Theme Toggle
        const THEME_KEY = 'spg_theme';

        function initTheme() {
            const savedTheme = localStorage.getItem(THEME_KEY) || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeButton(savedTheme);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem(THEME_KEY, newTheme);
            updateThemeButton(newTheme);
        }

        function updateThemeButton(theme) {
            const icon = document.getElementById('themeIcon');
            if (icon) {
                icon.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
            }
        }

        // Initialize theme on page load
        initTheme();
    </script>
</body>
</html>
