<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>í•™ìŠµ ê²½ë¡œ - ì£¼ì‹ í¬íŠ¸í´ë¦¬ì˜¤ ì§€ë‹ˆì–´ìŠ¤</title>
    <style>
        :root {
            --primary: #4ade80;
            --secondary: #3b82f6;
            --warning: #f59e0b;
            --bg-dark: #1a1a2e;
            --bg-card: rgba(255, 255, 255, 0.08);
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
        }

        .container { max-width: 1000px; margin: 0 auto; }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        h1 { font-size: 1.8rem; }

        .nav-links {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .nav-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            padding: 8px 14px;
            border-radius: 8px;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .nav-links a:hover, .nav-links a.active {
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
        }

        .header-buttons {
            display: flex;
            gap: 10px;
        }

        .theme-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2rem;
        }

        /* Progress Overview */
        .progress-overview {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .progress-title {
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .overall-progress {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            height: 24px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .overall-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 20px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .progress-stats {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        /* Week Cards */
        .curriculum-grid {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .week-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }

        .week-card:hover {
            transform: translateY(-2px);
            border-color: var(--primary);
        }

        .week-card.completed {
            border-color: var(--primary);
            background: rgba(74, 222, 128, 0.1);
        }

        .week-card.current {
            border-color: var(--secondary);
            background: rgba(59, 130, 246, 0.1);
        }

        .week-card.locked {
            opacity: 0.6;
        }

        .week-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .week-badge {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .week-number {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .week-card.completed .week-number {
            background: var(--primary);
        }

        .week-card.locked .week-number {
            background: rgba(255, 255, 255, 0.2);
        }

        .week-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .week-status {
            font-size: 1.5rem;
        }

        .week-description {
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .lessons-list {
            display: grid;
            gap: 12px;
        }

        .lesson-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            text-decoration: none;
            color: inherit;
            transition: all 0.2s;
        }

        .lesson-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .lesson-item.completed {
            background: rgba(74, 222, 128, 0.1);
        }

        .lesson-icon {
            font-size: 1.3rem;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .lesson-info {
            flex: 1;
        }

        .lesson-title {
            font-weight: 500;
            margin-bottom: 2px;
        }

        .lesson-meta {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .lesson-check {
            font-size: 1.2rem;
        }

        .week-progress {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .week-progress-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
        }

        .week-progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .week-progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Recommended Next */
        .next-action {
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.2), rgba(59, 130, 246, 0.2));
            border: 2px solid var(--primary);
            border-radius: 16px;
            padding: 24px;
            margin-top: 30px;
            text-align: center;
        }

        .next-action h3 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .next-action p {
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .next-action-btn {
            display: inline-block;
            background: var(--primary);
            color: #1a1a2e;
            padding: 12px 30px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.2s;
        }

        .next-action-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(74, 222, 128, 0.3);
        }

        /* Light Theme */
        :root[data-theme="light"] {
            --bg-dark: #f8fafc;
            --bg-card: rgba(0, 0, 0, 0.05);
            --text-primary: #1e293b;
            --text-secondary: #64748b;
        }

        :root[data-theme="light"] body {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        :root[data-theme="light"] .nav-links a {
            color: rgba(0, 0, 0, 0.6);
        }

        :root[data-theme="light"] .nav-links a:hover,
        :root[data-theme="light"] .nav-links a.active {
            color: #1a1a2e;
            background: rgba(0, 0, 0, 0.1);
        }

        :root[data-theme="light"] .week-card {
            border-color: rgba(0, 0, 0, 0.1);
        }

        :root[data-theme="light"] .lesson-item {
            background: rgba(0, 0, 0, 0.03);
        }

        @media (max-width: 768px) {
            .nav-links { display: none; }
            .week-header { flex-direction: column; align-items: flex-start; gap: 10px; }
            .progress-stats { justify-content: space-around; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“š í•™ìŠµ ê²½ë¡œ</h1>
            <nav class="nav-links">
                <a href="index.html">ğŸ“Š í¬íŠ¸í´ë¦¬ì˜¤</a>
                <a href="guide.html">ğŸ“– ê°€ì´ë“œ</a>
                <a href="quiz.html">ğŸ§  í€´ì¦ˆ</a>
                <a href="glossary.html">ğŸ“š ìš©ì–´ì§‘</a>
                <a href="calculator.html">ğŸ§® ê³„ì‚°ê¸°</a>
                <a href="curriculum.html" class="active">ğŸ¯ ì»¤ë¦¬í˜ëŸ¼</a>
                <a href="badges.html">ğŸ† ë°°ì§€</a>
            </nav>
            <div class="header-buttons">
                <button class="theme-toggle" onclick="toggleTheme()" title="í…Œë§ˆ ì „í™˜">
                    <span id="themeIcon">â˜€ï¸</span>
                </button>
            </div>
        </header>

        <!-- Progress Overview -->
        <div class="progress-overview">
            <div class="progress-header">
                <div class="progress-title">
                    <span>ğŸ“</span>
                    <span>ë‚˜ì˜ í•™ìŠµ ì§„í–‰ë¥ </span>
                </div>
            </div>
            <div class="overall-progress">
                <div class="overall-progress-bar" id="overallProgressBar" style="width: 0%">
                    <span id="progressPercent">0%</span>
                </div>
            </div>
            <div class="progress-stats">
                <div class="stat-item">
                    <div class="stat-value" id="completedLessons">0</div>
                    <div class="stat-label">ì™„ë£Œí•œ í•™ìŠµ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalLessons">0</div>
                    <div class="stat-label">ì „ì²´ í•™ìŠµ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="earnedBadges">0</div>
                    <div class="stat-label">íšë“ ë°°ì§€</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="currentLevel">ì…ë¬¸ì</div>
                    <div class="stat-label">í˜„ì¬ ë ˆë²¨</div>
                </div>
            </div>
        </div>

        <!-- Curriculum Grid -->
        <div class="curriculum-grid" id="curriculumGrid">
            <!-- Week cards will be rendered here -->
        </div>

        <!-- Next Action -->
        <div class="next-action" id="nextAction">
            <h3>ğŸš€ ë‹¤ìŒ ì¶”ì²œ í•™ìŠµ</h3>
            <p id="nextActionText">ë¡œë”© ì¤‘...</p>
            <a href="#" class="next-action-btn" id="nextActionBtn">í•™ìŠµ ì‹œì‘í•˜ê¸°</a>
        </div>
    </div>

    <script>
        // Curriculum Data
        const curriculum = [
            {
                week: 1,
                title: "íˆ¬ì ê¸°ì´ˆ ë‹¤ì§€ê¸°",
                description: "íˆ¬ìì˜ ê¸°ë³¸ ê°œë…ê³¼ í•µì‹¬ ìš©ì–´ë¥¼ í•™ìŠµí•©ë‹ˆë‹¤. ì£¼ì‹ ì‹œì¥ì˜ ê¸°ì´ˆë¥¼ ì´í•´í•˜ê³  íˆ¬ìë¥¼ ì‹œì‘í•˜ê¸° ìœ„í•œ ì²« ê±¸ìŒì„ ë‚´ë”›ìŠµë‹ˆë‹¤.",
                lessons: [
                    { id: 'glossary_basic', title: 'ê¸°ì´ˆ íˆ¬ì ìš©ì–´ 10ê°œ', type: 'glossary', icon: 'ğŸ“š', duration: '10ë¶„', link: 'glossary.html' },
                    { id: 'guide_intro', title: 'ê°€ì´ë“œ: íˆ¬ì ì›ì¹™ ê°œìš”', type: 'guide', icon: 'ğŸ“–', duration: '15ë¶„', link: 'guide.html' },
                    { id: 'quiz_basic', title: 'ê¸°ì´ˆ í€´ì¦ˆ', type: 'quiz', icon: 'ğŸ§ ', duration: '5ë¶„', link: 'quiz.html' },
                    { id: 'portfolio_view', title: 'í¬íŠ¸í´ë¦¬ì˜¤ ì‚´í´ë³´ê¸°', type: 'practice', icon: 'ğŸ“Š', duration: '5ë¶„', link: 'index.html' }
                ]
            },
            {
                week: 2,
                title: "ê°€ì¹˜íˆ¬ì ì…ë¬¸",
                description: "ì›Œë Œ ë²„í•ê³¼ ë²¤ì €ë¯¼ ê·¸ë ˆì´ì—„ì˜ ê°€ì¹˜íˆ¬ì ì² í•™ì„ ë°°ì›ë‹ˆë‹¤. ë‚´ì¬ê°€ì¹˜ì˜ ê°œë…ê³¼ ì•ˆì „ë§ˆì§„ì„ ì´í•´í•©ë‹ˆë‹¤.",
                lessons: [
                    { id: 'glossary_value', title: 'ê°€ì¹˜íˆ¬ì í•µì‹¬ ìš©ì–´', type: 'glossary', icon: 'ğŸ“š', duration: '10ë¶„', link: 'glossary.html' },
                    { id: 'guide_value', title: 'ê°€ì´ë“œ: ê·¸ë ˆì´ì—„ì˜ íˆ¬ì ì›ì¹™', type: 'guide', icon: 'ğŸ“–', duration: '20ë¶„', link: 'guide.html#graham' },
                    { id: 'calc_graham', title: 'ê·¸ë ˆì´ì—„ ê³µì‹ ê³„ì‚°ê¸° ì‹¤ìŠµ', type: 'calculator', icon: 'ğŸ§®', duration: '10ë¶„', link: 'calculator.html' },
                    { id: 'quiz_value', title: 'ê°€ì¹˜íˆ¬ì í€´ì¦ˆ', type: 'quiz', icon: 'ğŸ§ ', duration: '5ë¶„', link: 'quiz.html' }
                ]
            },
            {
                week: 3,
                title: "ì„±ì¥íˆ¬ì ì „ëµ",
                description: "í”¼í„° ë¦°ì¹˜ì™€ í•„ë¦½ í”¼ì…”ì˜ ì„±ì¥ì£¼ íˆ¬ì ì² í•™ì„ ë°°ì›ë‹ˆë‹¤. PEG ë¹„ìœ¨ê³¼ ì„±ì¥ ê°€ëŠ¥ì„± ë¶„ì„ë²•ì„ ìµí™ë‹ˆë‹¤.",
                lessons: [
                    { id: 'glossary_growth', title: 'ì„±ì¥íˆ¬ì ê´€ë ¨ ìš©ì–´', type: 'glossary', icon: 'ğŸ“š', duration: '10ë¶„', link: 'glossary.html' },
                    { id: 'guide_lynch', title: 'ê°€ì´ë“œ: í”¼í„° ë¦°ì¹˜ì˜ íˆ¬ìë²•', type: 'guide', icon: 'ğŸ“–', duration: '20ë¶„', link: 'guide.html#lynch' },
                    { id: 'calc_peg', title: 'PEG ê³„ì‚°ê¸° ì‹¤ìŠµ', type: 'calculator', icon: 'ğŸ§®', duration: '10ë¶„', link: 'calculator.html' },
                    { id: 'screener_use', title: 'ìŠ¤í¬ë¦¬ë„ˆë¡œ ì„±ì¥ì£¼ ì°¾ê¸°', type: 'practice', icon: 'ğŸ”', duration: '15ë¶„', link: 'screener.html' },
                    { id: 'quiz_growth', title: 'ì„±ì¥íˆ¬ì í€´ì¦ˆ', type: 'quiz', icon: 'ğŸ§ ', duration: '5ë¶„', link: 'quiz.html' }
                ]
            },
            {
                week: 4,
                title: "ë¦¬ìŠ¤í¬ ê´€ë¦¬",
                description: "íƒˆë ˆë¸Œì™€ ë§ˆì½”ìœ„ì¸ ì˜ ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì² í•™ì„ ë°°ì›ë‹ˆë‹¤. ë¶„ì‚°íˆ¬ìì™€ í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„± ì „ëµì„ ìµí™ë‹ˆë‹¤.",
                lessons: [
                    { id: 'glossary_risk', title: 'ë¦¬ìŠ¤í¬ ê´€ë¦¬ ìš©ì–´', type: 'glossary', icon: 'ğŸ“š', duration: '10ë¶„', link: 'glossary.html' },
                    { id: 'guide_risk', title: 'ê°€ì´ë“œ: ë¶„ì‚°íˆ¬ì ì›ì¹™', type: 'guide', icon: 'ğŸ“–', duration: '15ë¶„', link: 'guide.html#risk' },
                    { id: 'portfolio_sector', title: 'ì„¹í„°ë³„ ë¶„ì„ ì‹¤ìŠµ', type: 'practice', icon: 'ğŸ“Š', duration: '10ë¶„', link: 'index.html' },
                    { id: 'quiz_risk', title: 'ë¦¬ìŠ¤í¬ ê´€ë¦¬ í€´ì¦ˆ', type: 'quiz', icon: 'ğŸ§ ', duration: '5ë¶„', link: 'quiz.html' }
                ]
            },
            {
                week: 5,
                title: "ê³ ê¸‰ ê°€ì¹˜í‰ê°€",
                description: "DCFì™€ DDM ë“± ì „ë¬¸ ê°€ì¹˜í‰ê°€ ë°©ë²•ì„ í•™ìŠµí•©ë‹ˆë‹¤. ì‹¤ì œ ê¸°ì—… ë¶„ì„ì— ì ìš©í•˜ëŠ” ë°©ë²•ì„ ìµí™ë‹ˆë‹¤.",
                lessons: [
                    { id: 'glossary_advanced', title: 'ê³ ê¸‰ íˆ¬ì ìš©ì–´', type: 'glossary', icon: 'ğŸ“š', duration: '15ë¶„', link: 'glossary.html' },
                    { id: 'calc_dcf', title: 'DCF ê³„ì‚°ê¸° ë§ˆìŠ¤í„°', type: 'calculator', icon: 'ğŸ§®', duration: '20ë¶„', link: 'calculator.html' },
                    { id: 'calc_ddm', title: 'DDM ê³„ì‚°ê¸° ì‹¤ìŠµ', type: 'calculator', icon: 'ğŸ§®', duration: '15ë¶„', link: 'calculator.html' },
                    { id: 'ideas_explore', title: 'ì•„ì´ë””ì–´ ë¶„ì„ ì‹¤ìŠµ', type: 'practice', icon: 'ğŸ’¡', duration: '15ë¶„', link: 'ideas.html' }
                ]
            },
            {
                week: 6,
                title: "ì‹¤ì „ íˆ¬ì ë„ì „",
                description: "ë°°ìš´ ë‚´ìš©ì„ ì¢…í•©í•˜ì—¬ ì‹¤ì „ íˆ¬ìì— ë„ì „í•©ë‹ˆë‹¤. AI ëŒ€ê²°ì„ í†µí•´ íˆ¬ì ì‹¤ë ¥ì„ ê²€ì¦í•©ë‹ˆë‹¤.",
                lessons: [
                    { id: 'battle_challenge', title: 'AI íˆ¬ììì™€ ëŒ€ê²°', type: 'game', icon: 'ğŸ¤–', duration: '20ë¶„', link: 'battle.html' },
                    { id: 'quiz_all', title: 'ì¢…í•© í…ŒìŠ¤íŠ¸', type: 'quiz', icon: 'ğŸ§ ', duration: '15ë¶„', link: 'quiz.html' },
                    { id: 'portfolio_manage', title: 'í¬íŠ¸í´ë¦¬ì˜¤ ìµœì í™”', type: 'practice', icon: 'âš™ï¸', duration: '20ë¶„', link: 'manage.html' },
                    { id: 'history_review', title: 'ê±°ë˜ ë‚´ì—­ ë¶„ì„', type: 'practice', icon: 'ğŸ“œ', duration: '10ë¶„', link: 'history.html' }
                ]
            }
        ];

        // Storage Keys
        const PROGRESS_KEY = 'spg_curriculum_progress';
        const BADGE_KEY = 'spg_badges';
        const STATS_KEY = 'spg_badge_stats';

        // Load progress
        function loadProgress() {
            try {
                return JSON.parse(localStorage.getItem(PROGRESS_KEY)) || {};
            } catch {
                return {};
            }
        }

        // Save progress
        function saveProgress(progress) {
            try {
                localStorage.setItem(PROGRESS_KEY, JSON.stringify(progress));
            } catch (e) {
                console.error('Failed to save progress:', e);
            }
        }

        // Check if lesson is completed based on various indicators
        function isLessonCompleted(lessonId, type) {
            const progress = loadProgress();
            if (progress[lessonId]) return true;

            // Check based on type
            const badges = JSON.parse(localStorage.getItem(BADGE_KEY) || '[]');

            switch(type) {
                case 'glossary':
                    return badges.includes('glossary_explorer');
                case 'guide':
                    return badges.includes('guide_reader');
                case 'quiz':
                    return badges.includes('quiz_beginner');
                case 'calculator':
                    return badges.includes('calculator_user');
                case 'practice':
                    if (lessonId === 'portfolio_view') return badges.includes('portfolio_viewer');
                    if (lessonId === 'screener_use') return badges.includes('screener_user');
                    if (lessonId === 'battle_challenge') return badges.includes('battle_participant');
                    if (lessonId === 'history_review') return badges.includes('history_checker');
                    if (lessonId === 'ideas_explore') return badges.includes('idea_explorer');
                    break;
                case 'game':
                    return badges.includes('battle_participant');
            }

            return false;
        }

        // Mark lesson as completed
        function markLessonComplete(lessonId) {
            const progress = loadProgress();
            progress[lessonId] = { completedAt: new Date().toISOString() };
            saveProgress(progress);
            renderCurriculum();
        }

        // Calculate week progress
        function calculateWeekProgress(week) {
            const completedCount = week.lessons.filter(l => isLessonCompleted(l.id, l.type)).length;
            return {
                completed: completedCount,
                total: week.lessons.length,
                percent: Math.round((completedCount / week.lessons.length) * 100)
            };
        }

        // Calculate overall progress
        function calculateOverallProgress() {
            let totalCompleted = 0;
            let totalLessons = 0;

            curriculum.forEach(week => {
                const progress = calculateWeekProgress(week);
                totalCompleted += progress.completed;
                totalLessons += progress.total;
            });

            return {
                completed: totalCompleted,
                total: totalLessons,
                percent: totalLessons > 0 ? Math.round((totalCompleted / totalLessons) * 100) : 0
            };
        }

        // Get badge count
        function getBadgeCount() {
            try {
                const badges = JSON.parse(localStorage.getItem(BADGE_KEY) || '[]');
                return badges.length;
            } catch {
                return 0;
            }
        }

        // Get current level
        function getCurrentLevel() {
            try {
                const stats = JSON.parse(localStorage.getItem(STATS_KEY) || '{}');
                const points = stats.totalPoints || 0;

                if (points >= 500) return 'íˆ¬ì ë§ˆìŠ¤í„°';
                if (points >= 300) return 'ê³ ê¸‰ íˆ¬ìì';
                if (points >= 150) return 'ì¤‘ê¸‰ íˆ¬ìì';
                if (points >= 50) return 'ì´ˆë³´ íˆ¬ìì';
                return 'ì…ë¬¸ì';
            } catch {
                return 'ì…ë¬¸ì';
            }
        }

        // Find next recommended lesson
        function findNextLesson() {
            for (const week of curriculum) {
                for (const lesson of week.lessons) {
                    if (!isLessonCompleted(lesson.id, lesson.type)) {
                        return { week: week.week, lesson };
                    }
                }
            }
            return null;
        }

        // Render curriculum
        function renderCurriculum() {
            const grid = document.getElementById('curriculumGrid');
            const overall = calculateOverallProgress();

            // Update overall progress
            document.getElementById('overallProgressBar').style.width = overall.percent + '%';
            document.getElementById('progressPercent').textContent = overall.percent + '%';
            document.getElementById('completedLessons').textContent = overall.completed;
            document.getElementById('totalLessons').textContent = overall.total;
            document.getElementById('earnedBadges').textContent = getBadgeCount();
            document.getElementById('currentLevel').textContent = getCurrentLevel();

            // Render weeks
            grid.innerHTML = curriculum.map((week, index) => {
                const weekProgress = calculateWeekProgress(week);
                const isCompleted = weekProgress.percent === 100;
                const prevWeekCompleted = index === 0 || calculateWeekProgress(curriculum[index - 1]).percent === 100;
                const isCurrent = !isCompleted && prevWeekCompleted;
                const isLocked = !prevWeekCompleted && !isCompleted;

                let statusIcon = 'ğŸ”’';
                if (isCompleted) statusIcon = 'âœ…';
                else if (isCurrent) statusIcon = 'ğŸ“';

                const cardClass = isCompleted ? 'completed' : (isCurrent ? 'current' : (isLocked ? 'locked' : ''));

                return `
                    <div class="week-card ${cardClass}">
                        <div class="week-header">
                            <div class="week-badge">
                                <span class="week-number">${week.week}ì£¼ì°¨</span>
                                <span class="week-title">${week.title}</span>
                            </div>
                            <span class="week-status">${statusIcon}</span>
                        </div>
                        <p class="week-description">${week.description}</p>
                        <div class="lessons-list">
                            ${week.lessons.map(lesson => {
                                const completed = isLessonCompleted(lesson.id, lesson.type);
                                return `
                                    <a href="${isLocked ? '#' : lesson.link}"
                                       class="lesson-item ${completed ? 'completed' : ''}"
                                       onclick="${isLocked ? 'return false;' : `markLessonComplete('${lesson.id}')`}">
                                        <span class="lesson-icon">${lesson.icon}</span>
                                        <div class="lesson-info">
                                            <div class="lesson-title">${lesson.title}</div>
                                            <div class="lesson-meta">${lesson.duration}</div>
                                        </div>
                                        <span class="lesson-check">${completed ? 'âœ…' : (isLocked ? 'ğŸ”’' : 'â­•')}</span>
                                    </a>
                                `;
                            }).join('')}
                        </div>
                        <div class="week-progress">
                            <div class="week-progress-bar">
                                <div class="week-progress-fill" style="width: ${weekProgress.percent}%"></div>
                            </div>
                            <div class="week-progress-text">
                                <span>${weekProgress.completed}/${weekProgress.total} ì™„ë£Œ</span>
                                <span>${weekProgress.percent}%</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // Update next action
            const nextLesson = findNextLesson();
            const nextAction = document.getElementById('nextAction');

            if (nextLesson) {
                document.getElementById('nextActionText').textContent =
                    `${nextLesson.week}ì£¼ì°¨ - ${nextLesson.lesson.title}`;
                document.getElementById('nextActionBtn').href = nextLesson.lesson.link;
                document.getElementById('nextActionBtn').onclick = () => markLessonComplete(nextLesson.lesson.id);
            } else {
                document.getElementById('nextActionText').textContent = 'ëª¨ë“  í•™ìŠµì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤! ğŸ‰';
                document.getElementById('nextActionBtn').textContent = 'ë°°ì§€ í™•ì¸í•˜ê¸°';
                document.getElementById('nextActionBtn').href = 'badges.html';
            }
        }

        // Theme Toggle
        const THEME_KEY = 'spg_theme';

        function initTheme() {
            const savedTheme = localStorage.getItem(THEME_KEY) || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeButton(savedTheme);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem(THEME_KEY, newTheme);
            updateThemeButton(newTheme);
        }

        function updateThemeButton(theme) {
            const icon = document.getElementById('themeIcon');
            if (icon) {
                icon.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
            }
        }

        // Initialize
        initTheme();
        renderCurriculum();

        // Badge system integration
        if (typeof BadgeSystem !== 'undefined') {
            BadgeSystem.init();
        }
    </script>
    <script src="badges.js"></script>
</body>
</html>
